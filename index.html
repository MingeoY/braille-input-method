<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>13ÈîÆÁõ≤ÊñáËæìÂÖ•Ê≥ï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 95vh;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 2em;
        }
        
        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .lang-switch {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .lang-switch:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .input-section {
            flex: 0 0 auto;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #e9ecef;
            min-width: 250px;
            width: 320px;
        }

        .display-section {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            min-width: 200px;
        }

        .keyboard-container {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            justify-content: center;
            margin: 2px 0;
            width: 100%;
        }

        .keyboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            width: 100%;
            max-width: 100%;
        }
        
        .resize-handle {
            width: 10px;
            background: #e9ecef;
            cursor: col-resize;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .resize-handle:hover {
            background: #74b9ff;
        }
        
        .resize-handle::after {
            content: "‚ü∑";
            color: #636e72;
            font-size: 12px;
        }
        
        .key {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        
        .key:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .key:active {
            transform: translateY(1px);
        }
        
        .key-main-char {
            font-size: 1.2em;
            margin-bottom: 2px;
            transition: font-size 0.2s;
        }
        
        .key-directions {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .direction {
            position: absolute;
            font-size: 0.6em;
            opacity: 0.8;
            text-align: center;
            line-height: 1.2;
            transition: font-size 0.2s;
        }
        
        .direction-left {
            left: 3px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .direction-up {
            top: 3px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .direction-right {
            right: 3px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .direction-down {
            bottom: 3px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .key.active .key-main-char {
            font-size: 1.4em;
            opacity: 1;
        }
        
        .key.active .direction-left {
            font-size: 1.4em;
            opacity: 1;
        }
        
        .key.active .direction-up {
            font-size: 1.4em;
            opacity: 1;
        }
        
        .key.active .direction-right {
            font-size: 1.4em;
            opacity: 1;
        }
        
        .key.active .direction-down {
            font-size: 1.4em;
            opacity: 1;
        }
        
        .key-function {
            background: linear-gradient(135deg, #00b894, #00a085);
        }
        
        .key-space {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
        }
        
        .key-control {
            background: linear-gradient(135deg, #e17055, #d63031);
        }
        
        .display-area {
            margin-top: 15px;
        }
        
        .display-box {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            min-height: 80px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .display-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2d3436;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .display-content {
            font-size: 1.2em;
            line-height: 1.5;
            min-height: 40px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .braille-char {
            font-family: 'Segoe UI Symbol', sans-serif;
            font-size: 1.4em;
        }
        
        .undefined {
            color: #e74c3c;
        }
        
        .language-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .lang-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: #74b9ff;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .lang-btn.active {
            background: #0984e3;
            font-weight: bold;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: #636e72;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .action-btn:hover {
            background: #2d3436;
        }
        
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9em;
        }
        
        .cursor {
            display: inline-block;
            width: 2px;
            height: 1.2em;
            background: #0984e3;
            margin-left: 2px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        .language-controls {
            display: flex;
            gap: 5px;
        }
        
        .lang-control-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            color: #636e72;
            padding: 2px 5px;
        }
        
        .lang-control-btn:hover {
            color: #2d3436;
            background: #e9ecef;
            border-radius: 3px;
        }
        
        .language-box {
            position: relative;
        }
        
        .keyboard-guide {
            margin: 15px auto;
            text-align: center;
            font-size: 0.9em;
            color: #636e72;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .keyboard-guide img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .input-info {
            text-align: center;
            margin-bottom: 15px;
            color: #636e72;
            font-size: 0.9em;
        }
        
        .keyboard-schema {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin: 15px 0;
            max-width: 300px;
        }
        
        .schema-key {
            aspect-ratio: 1;
            background: #f1f2f6;
            border: 1px solid #ddd;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 0.8em;
            text-align: center;
            padding: 5px;
        }
        
        .schema-key-name {
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .schema-key-braille {
            font-family: 'Segoe UI Symbol', sans-serif;
            font-size: 1.2em;
        }
        
        .language-box.dragging {
            opacity: 0.5;
            border: 2px dashed #74b9ff;
        }
        
        .language-box.drag-over {
            border: 2px dashed #0984e3;
        }
        
        .language-box {
            cursor: move;
            transition: all 0.2s;
        }
        
        .input-section-content {
            flex: 1;
            overflow-y: auto;
        }
        
        .swipe-guide {
            text-align: center;
            margin: 15px 0;
            color: #636e72;
            font-size: 0.9em;
        }
        
        .voice-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9em;
            color: #636e72;
            padding: 2px 5px;
        }
        
        .voice-toggle.active {
            color: #00b894;
            font-weight: bold;
        }
        
        .voice-toggle:hover {
            color: #2d3436;
            background: #e9ecef;
            border-radius: 3px;
        }
        
        .language-dialog {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .language-dialog-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .language-options {
            margin: 15px 0;
        }
        
        .language-option {
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .language-option:hover {
            background: #f1f2f6;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 data-i18n="app_title">13ÈîÆÁõ≤ÊñáËæìÂÖ•Ê≥ï</h1>
            <div class="header-controls">
                <select class="lang-switch" id="langSwitch">
                    <option value="zh-CN">‰∏≠Êñá</option>
                    <option value="en">English</option>
                    <option value="ru">—Ä—É—Å—Å–∫–∏–π</option>
                    <option value="fr">fran√ßais</option>
                    <option value="es">espa√±ol</option>
                    <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                </select>
            </div>
        </header>
        
        <div class="main-content">
            <div class="input-section" id="inputSection">
                <h2 data-i18n="keyboard_input">ÈîÆÁõòËæìÂÖ•</h2>
                
                <div class="keyboard-container">
                    <div class="keyboard" id="keyboard">
                        <!-- ÈîÆÁõòÊåâÈîÆÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>

                <div class="input-info">
                    <p data-i18n="input_method_intro">ËæìÂÖ•ÊñπÂºè‰ªãÁªç</p>
                </div>
                
                <div class="swipe-guide">
                    <p data-i18n="swipe_demo">ÊªëÂä®Êìç‰ΩúÊºîÁ§∫</p>
                </div>
                
                <!-- Áõ≤ÊñáÈîÆÁõòÁ§∫ÊÑèÂõæ -->
                <div class="keyboard-guide">
                    <p data-i18n="braille_keyboard_schema">Áõ≤ÊñáÈîÆÁõòÁ§∫ÊÑèÂõæ</p>
                    <div class="keyboard-schema">
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key1">1Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†Å</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key2">2Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†É</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key3">3Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†â</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key4">4Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†ô</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key5">5Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†ë</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key6">6Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†ã</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key7">7Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†õ</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key8">8Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†ì</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key9">9Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†ä</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key_add1">ÈôÑÂä†1ÈîÆ</div>
                            <div class="schema-key-braille">‚†à</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key0">0Âè∑ÈîÆ</div>
                            <div class="schema-key-braille">‚†ö</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key_add2">ÈôÑÂä†2ÈîÆ</div>
                            <div class="schema-key-braille">‚†ò</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key_display">ÊòæÁ§∫ÈîÆ</div>
                            <div class="schema-key-braille">üì±</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key_space">Á©∫Ê†ºÈîÆ</div>
                            <div class="schema-key-braille">‚†Ä</div>
                        </div>
                        <div class="schema-key">
                            <div class="schema-key-name" data-i18n="key_enter">ÂõûËΩ¶ÈîÆ</div>
                            <div class="schema-key-braille">‚Üµ</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="resize-handle" id="resizeHandle"></div>
            
            <div class="display-section" id="displaySection">
                <h2 data-i18n="text_output">ÊñáÊú¨ËæìÂá∫</h2>
                
                <div class="display-area" id="displayArea">
                    <div class="display-box">
                        <div class="display-title">
                            <span data-i18n="braille_display">Áõ≤ÊñáÊòæÁ§∫</span>
                            <div class="language-controls">
                                <button class="lang-control-btn" onclick="copyBraille()" data-i18n="copy">Â§çÂà∂</button>
                                <button class="lang-control-btn" onclick="handleBackspace()" data-i18n="delete">Âà†Èô§</button>
                                <button class="lang-control-btn" onclick="clearBraille()" data-i18n="clear">Ê∏ÖÁ©∫</button>
                            </div>
                        </div>
                        <div class="display-content" id="brailleDisplay" contenteditable="true"></div>
                    </div>
                    
                    <!-- ËØ≠Ë®ÄÊòæÁ§∫Ê°ÜÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn" id="addLangBtn" data-i18n="add_language">Ê∑ªÂä†ËØ≠Áßç</button>
                    <button class="action-btn" id="clearBtn" data-i18n="clear_input">Ê∏ÖÁ©∫ËæìÂÖ•</button>
                </div>
            </div>
            
        </div>
    </div>

    <script>
        // Â§öËØ≠Ë®ÄÊîØÊåÅ
        const i18n = {
            'zh-CN': {
                'app_title': '13ÈîÆÁõ≤ÊñáËæìÂÖ•Ê≥ï',
                'keyboard_input': 'ÈîÆÁõòËæìÂÖ•',
                'text_output': 'ÊñáÊú¨ËæìÂá∫',
                'input_method_intro': 'ÁÇπÂáªÊåâÈîÆËæìÂÖ•‰∏≠Â§ÆÂ≠óÁ¨¶ÔºåÂêëÂõõ‰∏™ÊñπÂêëÊªëÂä®ÂèØËæìÂÖ•‰∏çÂêåÂ≠óÁ¨¶',
                'swipe_demo': 'ÊªëÂä®Êìç‰ΩúÊºîÁ§∫Ôºö‰ª•7Âè∑ÈîÆ‰∏∫‰æãÔºåÁÇπÂáª‰∏∫‚†õÔºåÂ∑¶Êªë‰∏∫‚†üÔºå‰∏äÊªë‰∏∫‚†øÔºåÂè≥Êªë‰∏∫‚†ªÔºå‰∏ãÊªë‰∏∫‚†∂',
                'braille_keyboard_schema': 'Áõ≤ÊñáÈîÆÁõòÁ§∫ÊÑèÂõæ',
                'key1': '1Âè∑ÈîÆ',
                'key2': '2Âè∑ÈîÆ',
                'key3': '3Âè∑ÈîÆ',
                'key4': '4Âè∑ÈîÆ',
                'key5': '5Âè∑ÈîÆ',
                'key6': '6Âè∑ÈîÆ',
                'key7': '7Âè∑ÈîÆ',
                'key8': '8Âè∑ÈîÆ',
                'key9': '9Âè∑ÈîÆ',
                'key0': '0Âè∑ÈîÆ',
                'key_add1': 'ÈôÑÂä†1ÈîÆ',
                'key_add2': 'ÈôÑÂä†2ÈîÆ',
                'key_display': 'ÊòæÁ§∫',
                'key_space': 'Á©∫Êñπ',
                'key_enter': 'ÂõûËΩ¶',
                'braille_display': 'Áõ≤ÊñáÊòæÁ§∫',
                'copy': 'Â§çÂà∂',
                'delete': 'Âà†Èô§',
                'clear': 'Ê∏ÖÁ©∫',
                'add_language': 'Ê∑ªÂä†ËØ≠Áßç',
                'clear_input': 'Ê∏ÖÁ©∫ËæìÂÖ•',
                'voice_prompt': 'ËØ≠Èü≥ÊèêÁ§∫: ÂºÄÂêØ',
                'select_language': 'ÈÄâÊã©ËØ≠Áßç',
                'cancel': 'ÂèñÊ∂à',
                'copied_done': 'Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø',
                'max_ten_lang': 'ÊúÄÂ§öÂè™ËÉΩÊ∑ªÂä†10‰∏™ËØ≠ÁßçÔºÅ'
            },
            'en': {
                'app_title': '13-key Braille Input Method',
                'keyboard_input': 'Keyboard Input',
                'text_output': 'Text Output',
                'input_method_intro': 'Click keys to input corresponding characters, swipe in different directions for different characters',
                'swipe_demo': 'Swipe demo: For key 7, tap for ‚†õ, swipe left for ‚†ü, up for ‚†ø, right for ‚†ª, down for ‚†∂',
                'braille_keyboard_schema': 'Braille Keyboard Schema',
                'clear_input': 'Clear Input',
                'key1': 'Key 1',
                'key2': 'Key 2',
                'key3': 'Key 3',
                'key4': 'Key 4',
                'key5': 'Key 5',
                'key6': 'Key 6',
                'key7': 'Key 7',
                'key8': 'Key 8',
                'key9': 'Key 9',
                'key0': 'Key 0',
                'key_add1': 'Add Key 1',
                'key_add2': 'Add Key 2',
                'key_display': 'Display',
                'key_space': 'Space',
                'key_enter': 'Enter',
                'braille_display': 'Braille Display',
                'copy': 'Copy',
                'delete': 'Delete',
                'clear': 'Clear',
                'add_language': 'Add Language',
                'voice_prompt': 'Voice Prompt: On',
                'select_language': 'Select Language',
                'cancel': 'Cancel',
                'copied_done': 'Copied to clipboard',
                'max_ten_lang': 'Maximum 10 languages allowed!'
            },
            'ru': {
                'app_title': '13-–∫–ª–∞–≤–∏—à–Ω—ã–π –ë—Ä–∞–π–ª–µ–≤—Å–∫–∏–π –≤–≤–æ–¥',
                'keyboard_input': '–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–π –≤–≤–æ–¥',
                'text_output': '–¢–µ–∫—Å—Ç –≤—ã–≤–æ–¥',
                'input_method_intro': '–ù–∞–∂–º–∏—Ç–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤, –ø—Ä–æ–≤–µ–¥–∏—Ç–µ –≤ —Ä–∞–∑–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤',
                'swipe_demo': '–î–µ–º–æ —Å–≤–∞–π–ø–∞: –î–ª—è –∫–ª–∞–≤–∏—à–∏ 7, —Ç–∞–ø –¥–ª—è ‚†õ, —Å–≤–∞–π–ø –≤–ª–µ–≤–æ –¥–ª—è ‚†ü, –≤–≤–µ—Ä—Ö –¥–ª—è ‚†ø, –≤–ø—Ä–∞–≤–æ –¥–ª—è ‚†ª, –≤–Ω–∏–∑ –¥–ª—è ‚†∂',
                'braille_keyboard_schema': '–°—Ö–µ–º–∞ –±—Ä–∞–π–ª–µ–≤—Å–∫–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã',
                'clear_input': '–û—á–∏—Å—Ç–∏—Ç—å –≤–≤–æ–¥',
                'key1': '–ö–ª–∞–≤–∏—à–∞ 1',
                'key2': '–ö–ª–∞–≤–∏—à–∞ 2',
                'key3': '–ö–ª–∞–≤–∏—à–∞ 3',
                'key4': '–ö–ª–∞–≤–∏—à–∞ 4',
                'key5': '–ö–ª–∞–≤–∏—à–∞ 5',
                'key6': '–ö–ª–∞–≤–∏—à–∞ 6',
                'key7': '–ö–ª–∞–≤–∏—à–∞ 7',
                'key8': '–ö–ª–∞–≤–∏—à–∞ 8',
                'key9': '–ö–ª–∞–≤–∏—à–∞ 9',
                'key0': '–ö–ª–∞–≤–∏—à–∞ 0',
                'key_add1': '–î–æ–ø. –∫–ª–∞–≤–∏—à–∞ 1',
                'key_add2': '–î–æ–ø. –∫–ª–∞–≤–∏—à–∞ 2',
                'key_display': '–î–∏—Å–ø–ª–µ–π',
                'key_space': '–ü—Ä–æ–±–µ–ª',
                'key_enter': '–í–≤–æ–¥',
                'braille_display': '–ë—Ä–∞–π–ª–µ–≤—Å–∫–∏–π –¥–∏—Å–ø–ª–µ–π',
                'copy': '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å',
                'delete': '–£–¥–∞–ª–∏—Ç—å',
                'clear': '–û—á–∏—Å—Ç–∏—Ç—å',
                'add_language': '–î–æ–±–∞–≤–∏—Ç—å —è–∑—ã–∫',
                'voice_prompt': '–ì–æ–ª–æ—Å–æ–≤–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞: –í–∫–ª',
                'select_language': '–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫',
                'cancel': '–û—Ç–º–µ–Ω–∞',
                'copied_done': '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞',
                'max_ten_lang': '–†–∞–∑—Ä–µ—à–µ–Ω–æ –Ω–µ –±–æ–ª–µ–µ 10 —è–∑—ã–∫–æ–≤!'
            },
            'fr': {
                'app_title': 'M√©thode de saisie Braille 13 touches',
                'keyboard_input': 'Saisie clavier',
                'text_output': 'Sortie texte',
                'input_method_intro': 'Cliquez sur les touches pour saisir les caract√®res correspondants, glissez dans diff√©rentes directions pour diff√©rents caract√®res',
                'swipe_demo': 'D√©mo glissement: Pour touche 7, appuyer pour ‚†õ, glisser gauche pour ‚†ü, haut pour ‚†ø, droite pour ‚†ª, bas pour ‚†∂',
                'braille_keyboard_schema': 'Sch√©ma clavier Braille',
                'clear_input': 'Effacer saisie',
                'key1': 'Touche 1',
                'key2': 'Touche 2',
                'key3': 'Touche 3',
                'key4': 'Touche 4',
                'key5': 'Touche 5',
                'key6': 'Touche 6',
                'key7': 'Touche 7',
                'key8': 'Touche 8',
                'key9': 'Touche 9',
                'key0': 'Touche 0',
                'key_add1': 'Touche add 1',
                'key_add2': 'Touche add 2',
                'key_display': 'Affichage',
                'key_space': 'Espace',
                'key_enter': 'Entr√©e',
                'braille_display': 'Affichage Braille',
                'copy': 'Copier',
                'delete': 'Supprimer',
                'clear': 'Effacer',
                'add_language': 'Ajouter langue',
                'voice_prompt': 'Invite vocale: Activ√©',
                'select_language': 'S√©lectionner la langue',
                'cancel': 'Annuler',
                'copied_done': 'Copi√© dans le clipboard',
                'max_ten_lang': 'Maximum de 10 langues autoris√©es !'
            },
            'es': {
                'app_title': 'M√©todo de entrada Braille de 13 teclas',
                'keyboard_input': 'Entrada de teclado',
                'text_output': 'Salida de texto',
                'input_method_intro': 'Haga clic en las teclas para ingresar caracteres correspondientes, deslice en diferentes direcciones para diferentes caracteres',
                'swipe_demo': 'Demostraci√≥n deslizamiento: Para tecla 7, toque para ‚†õ, deslice izquierda para ‚†ü, arriba para ‚†ø, derecha para ‚†ª, abajo para ‚†∂',
                'braille_keyboard_schema': 'Esquema teclado Braille',
                'clear_input': 'Limpiar entrada',
                'key1': 'Tecla 1',
                'key2': 'Tecla 2',
                'key3': 'Tecla 3',
                'key4': 'Tecla 4',
                'key5': 'Tecla 5',
                'key6': 'Tecla 6',
                'key7': 'Tecla 7',
                'key8': 'Tecla 8',
                'key9': 'Tecla 9',
                'key0': 'Tecla 0',
                'key_add1': 'Tecla add 1',
                'key_add2': 'Tecla add 2',
                'key_display': 'Pantalla',
                'key_space': 'Espacio',
                'key_enter': 'Entrar',
                'braille_display': 'Pantalla Braille',
                'copy': 'Copiar',
                'delete': 'Eliminar',
                'clear': 'Limpiar',
                'add_language': 'A√±adir idioma',
                'voice_prompt': 'Aviso de voz: Activado',
                'select_language': 'Seleccionar idioma',
                'cancel': 'Cancelar',
                'copied_done': 'Copiado en el clipboard',
                'max_ten_lang': '¬°S√≥lo se pueden agregar hasta 10 idiomas!'
            },
            'ar': {
                'app_title': 'ÿ∑ÿ±ŸäŸÇÿ© ÿ•ÿØÿÆÿßŸÑ ÿ®ÿ±ÿßŸäŸÑ ÿ∞ÿßÿ™ 13 ŸÖŸÅÿ™ÿßÿ≠Ÿãÿß',
                'keyboard_input': 'ÿ•ÿØÿÆÿßŸÑ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠',
                'text_output': 'ÿ•ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÜÿµ',
                'input_method_intro': 'ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ŸÑÿ•ÿØÿÆÿßŸÑ ÿßŸÑÿ£ÿ≠ÿ±ŸÅ ÿßŸÑŸÖŸÇÿßÿ®ŸÑÿ©ÿå ÿßÿ≥ÿ≠ÿ® ŸÅŸä ÿßÿ™ÿ¨ÿßŸáÿßÿ™ ŸÖÿÆÿ™ŸÑŸÅÿ© ŸÑÿ£ÿ≠ÿ±ŸÅ ŸÖÿÆÿ™ŸÑŸÅÿ©',
                'swipe_demo': 'ÿπÿ±ÿ∂ ÿßŸÑÿ≥ÿ≠ÿ®: ŸÑŸÑŸÖŸÅÿ™ÿßÿ≠ 7ÿå ÿßŸÜŸÇÿ± ŸÑŸÄ ‚†õÿå ÿßÿ≥ÿ≠ÿ® ŸÑŸÑŸäÿ≥ÿßÿ± ŸÑŸÄ ‚†üÿå ŸÑÿ£ÿπŸÑŸâ ŸÑŸÄ ‚†øÿå ŸÑŸÑŸäŸÖŸäŸÜ ŸÑŸÄ ‚†ªÿå ŸÑÿ£ÿ≥ŸÅŸÑ ŸÑŸÄ ‚†∂',
                'braille_keyboard_schema': 'ŸÖÿÆÿ∑ÿ∑ ŸÑŸàÿ≠ÿ© ŸÖŸÅÿßÿ™Ÿäÿ≠ ÿ®ÿ±ÿßŸäŸÑ',
                'clear_input': 'ŸÖÿ≥ÿ≠ ÿßŸÑÿ•ÿØÿÆÿßŸÑ',
                'key1': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 1',
                'key2': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 2',
                'key3': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 3',
                'key4': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 4',
                'key5': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 5',
                'key6': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 6',
                'key7': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 7',
                'key8': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 8',
                'key9': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 9',
                'key0': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ 0',
                'key_add1': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ•ÿ∂ÿßŸÅŸä 1',
                'key_add2': 'ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ•ÿ∂ÿßŸÅŸä 2',
                'key_display': 'ÿπÿ±ÿ∂',
                'key_space': 'ŸÖÿ≥ÿßŸÅÿ©',
                'key_enter': 'ÿ•ÿØÿÆÿßŸÑ',
                'braille_display': 'ÿπÿ±ÿ∂ ÿ®ÿ±ÿßŸäŸÑ',
                'copy': 'ŸÜÿ≥ÿÆ',
                'delete': 'ÿ≠ÿ∞ŸÅ',
                'clear': 'ŸÖÿ≥ÿ≠',
                'add_language': 'ÿ•ÿ∂ÿßŸÅÿ© ŸÑÿ∫ÿ©',
                'voice_prompt': 'ÿßŸÑÿ™ŸÜÿ®ŸäŸá ÿßŸÑÿµŸàÿ™Ÿä: ŸÖŸÅÿπŸÑ',
                'select_language': 'ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©',
                'cancel': 'ÿ•ŸÑÿ∫ÿßÿ°',
                'copied_done': 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ ÿ•ŸÑŸâ ÿßŸÑÿ≠ÿßŸÅÿ∏ÿ©',
                'max_ten_lang': 'ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ÿßŸÑŸÖÿ≥ŸÖŸàÿ≠ ÿ®Ÿá ŸáŸà 10 ŸÑÿ∫ÿßÿ™!'
            }
        };

        // Áõ≤ÊñáÂà∞ÂêÑËØ≠Ë®ÄÁöÑÊò†Â∞ÑË°®
        const brailleMaps = {
            eo: { // ‰∏ñÁïåËØ≠
                name: "Esperanto ‚†ë‚†é‚†è‚†ë‚†ó‚†Å‚†ù‚†û‚†ï",
                '‚†Å': 'a', '‚†É': 'b', '‚†â': 'c', '‚†ô': 'd', '‚†ë': 'e',
                '‚†ã': 'f', '‚†õ': 'g', '‚†ì': 'h', '‚†ä': 'i', '‚†ö': 'j',
                '‚†Ö': 'k', '‚†á': 'l', '‚†ç': 'm', '‚†ù': 'n', '‚†ï': 'o',
                '‚†è': 'p', '‚†ü': 'q', '‚†ó': 'r', '‚†é': 's', '‚†û': 't',
                '‚†•': 'u', '‚†ß': 'v', '‚†≠': 'x', '‚†Ω': 'y', '‚†µ': 'z',
                '‚†©': 'ƒâ', '‚†ª': 'ƒù', '‚†≥': 'ƒ•', '‚†Æ': '≈ù', '‚†∫': 'ƒµ',
                '‚†¨': '≈≠', '‚†ú': '√§', '‚†´': '√∂', '‚†∑': '√º',
                '‚†Ç': ',', '‚†Ü': ';', '‚†í': ':', '‚†≤': '.', '‚†¢': '?',
                '‚†ñ': '!', '‚†¶': '"', '‚†î': '*', '‚†¥': '"', '‚†å': '/',
                '‚†§': '-', '‚†Ñ': "'", '‚†Ä': ' ',
                // ËØ≠Èü≥ÊèêÁ§∫ - ‰∏ñÁïåËØ≠‰∏çÊîØÊåÅËØ≠Èü≥ÊèêÁ§∫
                voicePrompts: {}
            },
            zh: { // Ê±âËØ≠Ê≥®Èü≥Á¨¶Âè∑
                name: "„Ñè„Ñ¢Àã„Ñ©ÀáÔºàÊ±âËØ≠Ê≥®Èü≥Á¨¶Âè∑Ôºâ ‚†ì‚†ß‚†Ü‚†¨‚†Ñ",
                // ÈîÆÁõòÊòæÁ§∫Â≠óÁ¨¶
                displayChars: {
                    // Â£∞Ë∞É
                    '‚†Å': 'Èò¥Âπ≥', '‚†Ç': 'Èò≥Âπ≥', '‚†Ñ': '‰∏äÂ£∞', '‚†Ü': 'ÂéªÂ£∞',
                    // ÈüµÊØç
                    '‚†î': '„Ñö', '‚†´': '„Ñß„Ñö', '‚†ø': '„Ñ®„Ñö',
                    '‚†ä': '„Ñß', '‚†•': '„Ñ®', '‚†¨': '„Ñ©', '‚†ó': '„Ñ¶',
                    '‚†¢': '„Ñõ/„Ñú', '‚†ë': '„Ñß„Ñù', '‚†ï': '„Ñ®„Ñõ', '‚†æ': '„Ñ©„Ñù',
                    '‚†ñ': '„Ñ†', '‚†ú': '„Ñß„Ñ†',
                    '‚†∑': '„Ñ°', '‚†≥': '„Ñß„Ñ°',
                    '‚†™': '„Ñû', '‚†Ω': '„Ñ®„Ñû',
                    '‚†Æ': '„Ñü', '‚†∫': '„Ñ®„Ñü',
                    '‚†ß': '„Ñ¢', '‚†©': '„Ñß„Ñ¢', '‚†ª': '„Ñ®„Ñ¢', '‚†Ø': '„Ñ©„Ñ¢',
                    '‚†¥': '„Ñ£', '‚†£': '„Ñß„Ñ£', '‚†í': '„Ñ®„Ñ£', '‚†∏': '„Ñ©„Ñ£', 
                    '‚†¶': '„Ñ§', '‚†≠': '„Ñß„Ñ§', '‚†∂': '„Ñ®„Ñ§', 
                    '‚†º': '„Ñ•', '‚†°': '„Ñß„Ñ•', '‚†≤': '„Ñ®„Ñ•', '‚†π': '„Ñ©„Ñ•',
                    // Â£∞ÊØç
                    '‚†É': '„ÑÖ', '‚†è': '„ÑÜ', '‚†ç': '„Ñá', '‚†ã': '„Ñà',
                    '‚†ô': '„Ñâ', '‚†û': '„Ñä', '‚†ù': '„Ñã', '‚†á': '„Ñå',
                    '‚†õ': '„Ñç/„Ñê', '‚†Ö': '„Ñé/„Ñë', '‚†ì': '„Ñè/„Ñí',
                    '‚†å': '„Ñì', '‚†ü': '„Ñî', '‚†±': '„Ñï', '‚†ö': '„Ññ',
                    '‚†µ': '„Ñó', '‚†â': '„Ñò', '‚†é': '„Ñô',
                    // Ê†áÁÇπÂíåÂÖ∂‰ªñ
                    '‚†à': '„ÄÅ', '‚†ò': '"', '‚†§': 'Ôºö', '‚†ê': 'Ôºå', '‚†∞': 'Ôºõ',
                    '‚††': 'ABCD', '‚†®': 'Œ±Œ≤Œ≥Œ¥','‚†Ä': ' '
                },
                // ÂÆûÈôÖËæìÂá∫Â≠óÁ¨¶
                '‚†Å': 'Àâ', '‚†Ç': 'Àä', '‚†Ñ': 'Àá', '‚†Ü': 'Àã',
                // ÈüµÊØç
                '‚†î': '„Ñö', '‚†´': '„Ñß„Ñö', '‚†ø': '„Ñ®„Ñö',
                '‚†ä': '„Ñß', '‚†•': '„Ñ®', '‚†¨': '„Ñ©', '‚†ó': '„Ñ¶',
                '‚†¢': '„Ñú', '‚†ë': '„Ñß„Ñù', '‚†ï': '„Ñ®„Ñõ', '‚†æ': '„Ñ©„Ñù',
                '‚†ñ': '„Ñ†', '‚†ú': '„Ñß„Ñ†',
                '‚†∑': '„Ñ°', '‚†≥': '„Ñß„Ñ°',
                '‚†™': '„Ñû', '‚†Ω': '„Ñ®„Ñû',
                '‚†Æ': '„Ñü', '‚†∫': '„Ñ®„Ñü',
                '‚†ß': '„Ñ¢', '‚†©': '„Ñß„Ñ¢', '‚†ª': '„Ñ®„Ñ¢', '‚†Ø': '„Ñ©„Ñ¢',
                '‚†¥': '„Ñ£', '‚†£': '„Ñß„Ñ£', '‚†í': '„Ñ®„Ñ£', '‚†∏': '„Ñ©„Ñ£', 
                '‚†¶': '„Ñ§', '‚†≠': '„Ñß„Ñ§', '‚†∂': '„Ñ®„Ñ§', 
                '‚†º': '„Ñ•', '‚†°': '„Ñß„Ñ•', '‚†≤': '„Ñ®„Ñ•', '‚†π': '„Ñ©„Ñ•',
                // Â£∞ÊØç
                '‚†É': '„ÑÖ', '‚†è': '„ÑÜ', '‚†ç': '„Ñá', '‚†ã': '„Ñà',
                '‚†ô': '„Ñâ', '‚†û': '„Ñä', '‚†ù': '„Ñã', '‚†á': '„Ñå',
                '‚†õ': '„Ñç', '‚†Ö': '„Ñé', '‚†ì': '„Ñè',
                '‚†å': '„Ñì', '‚†ü': '„Ñî', '‚†±': '„Ñï', '‚†ö': '„Ññ',
                '‚†µ': '„Ñó', '‚†â': '„Ñò', '‚†é': '„Ñô',
                // Ê†áÁÇπÂíåÂÖ∂‰ªñ
                '‚†à': '„ÄÅ', '‚†ò': '"', '‚†§': 'Ôºö', '‚†ê': 'Ôºå', '‚†∞': 'Ôºõ',
                '‚††': '', '‚†®': '','‚†Ä': ' ',
                // ËØ≠Èü≥ÊèêÁ§∫
                voicePrompts: {
                    '‚†Å': 'Á¨¨‰∏ÄÂ£∞ÔºåÈò¥Âπ≥Ë∞É', '‚†Ç': 'Á¨¨‰∫åÂ£∞ÔºåÈò≥Âπ≥Ë∞É', '‚†Ñ': 'Á¨¨‰∏âÂ£∞Ôºå‰∏äÂ£∞Ë∞É', '‚†Ü': 'Á¨¨ÂõõÂ£∞ÔºåÂéªÂ£∞Ë∞É',
                    // ÈüµÊØç
                    '‚†î': 'Èòø', '‚†´': 'È∏≠', '‚†ø': 'Ëõô',
                    '‚†ä': '‰ºä', '‚†•': '‰πå', '‚†¨': 'ËøÇ', '‚†ó': 'ÂÑø',
                    '‚†¢': 'ÂñîÔºåÂ±ô', '‚†ë': 'Ê§∞', '‚†ï': 'Á™ù', '‚†æ': 'Á∫¶',
                    '‚†ñ': 'Âáπ', '‚†ú': 'Â¶ñ',
                    '‚†∑': 'Ê¨ß', '‚†≥': '‰ºò',
                    '‚†™': 'ÂüÉ', '‚†Ω': 'Ê≠™',
                    '‚†Æ': 'Ê¨∏', '‚†∫': 'Âç±',
                    '‚†ß': 'ÂÆâ', '‚†©': 'ÁÑâ', '‚†ª': 'ÂºØ', '‚†Ø': 'Ê∏ä',
                    '‚†¥': 'ÊÅ©', '‚†£': 'Èü≥', '‚†í': 'Ê∏©', '‚†∏': 'Êôï', 
                    '‚†¶': 'ËÇÆ', '‚†≠': 'Â§Æ', '‚†∂': 'Ê±™', 
                    '‚†º': 'Èû•', '‚†°': 'Ëã±', '‚†≤': 'ÁøÅ', '‚†π': 'Êã•',
                    // Â£∞ÊØç
                    '‚†É': 'Ê≥¢', '‚†è': 'Âù°', '‚†ç': 'Êë∏', '‚†ã': '‰Ωõ',
                    '‚†ô': 'ÁöÑ', '‚†û': 'Áâπ', '‚†ù': 'Âë¢', '‚†á': '‰∫Ü',
                    '‚†õ': 'Ê≠åÔºåÈ∏°', '‚†Ö': 'ÁßëÔºå‰∏É', '‚†ì': 'ÂñùÔºåË•ø',
                    '‚†å': 'Ê±Å', '‚†ü': 'ÂêÉ', '‚†±': 'Â∏à', '‚†ö': 'Êó•',
                    '‚†µ': 'ËµÑ', '‚†â': 'Áñµ', '‚†é': 'Âè∏',
                    // Ê†áÁÇπ
                    '‚†à': 'È°øÂè∑', '‚†ò': 'ÂºïÂè∑', '‚†§': 'ÂÜíÂè∑', '‚†ê': 'ÈÄóÂè∑', '‚†∞': 'ÂàÜÂè∑',
                    '‚††': 'Â§ßÂÜôÊãâ‰∏ÅÂ≠óÊØç', '‚†®': 'Â∞èÂÜôÂ∏åËÖäÂ≠óÊØç', '‚†Ä': 'Á©∫Êñπ'
                }
            },
            en: { // Ëã±ËØ≠
                name: "English ‚†ë‚†ù‚†õ‚†á‚†ä‚†©",
                '‚†Å': 'a', '‚†É': 'b', '‚†â': 'c', '‚†ô': 'd', '‚†ë': 'e',
                '‚†ã': 'f', '‚†õ': 'g', '‚†ì': 'h', '‚†ä': 'i', '‚†ö': 'j',
                '‚†Ö': 'k', '‚†á': 'l', '‚†ç': 'm', '‚†ù': 'n', '‚†ï': 'o',
                '‚†è': 'p', '‚†ü': 'q', '‚†ó': 'r', '‚†é': 's', '‚†û': 't',
                '‚†•': 'u', '‚†ß': 'v', '‚†≠': 'x', '‚†Ω': 'y', '‚†µ': 'z',
                '‚†∑': 'w', '‚†Ç': ',', '‚†≤': '.', '‚†ñ': '!', '‚†§': '-',
                '‚†Ü': ';', '‚†í': ':', '‚†¢': '?', '‚†Ñ': '\'', '‚†Ä': ' ',
                voicePrompts: {
                    '‚†Å': 'a', '‚†É': 'b', '‚†â': 'c', '‚†ô': 'd', '‚†ë': 'e',
                    '‚†ã': 'f', '‚†õ': 'g', '‚†ì': 'h', '‚†ä': 'i', '‚†ö': 'j',
                    '‚†Ö': 'k', '‚†á': 'l', '‚†ç': 'm', '‚†ù': 'n', '‚†ï': 'o',
                    '‚†è': 'p', '‚†ü': 'q', '‚†ó': 'r', '‚†é': 's', '‚†û': 't',
                    '‚†•': 'u', '‚†ß': 'v', '‚†≠': 'x', '‚†Ω': 'y', '‚†µ': 'z',
                    '‚†∑': 'w', '‚†Ç': 'comma', '‚†≤': 'period', '‚†ñ': 'exclamation',
                    '‚†Ñ': 'apostrophe', '‚†§': 'hyphen', '‚†Ü': 'semicolon',
                    '‚†í': 'colon', '‚†¢': 'question mark', '‚†Ä': 'space'
                }
            },
            fr: { // Ê≥ïËØ≠
                name: "fran√ßais ‚†ã‚†ó‚†Å‚†ù‚†â‚†Å‚†ä‚†é",
                '‚†Å': 'a', '‚†É': 'b', '‚†â': 'c', '‚†ô': 'd', '‚†ë': 'e',
                '‚†ã': 'f', '‚†õ': 'g', '‚†ì': 'h', '‚†ä': 'i', '‚†ö': 'j',
                '‚†Ö': 'k', '‚†á': 'l', '‚†ç': 'm', '‚†ù': 'n', '‚†ï': 'o',
                '‚†è': 'p', '‚†ü': 'q', '‚†ó': 'r', '‚†é': 's', '‚†û': 't',
                '‚†•': 'u', '‚†ß': 'v', '‚†≠': 'x', '‚†Ω': 'y', '‚†µ': 'z',
                '‚†°': '√¢', '‚†£': '√™', '‚†©': '√Æ', '‚†π': '√¥', '‚†±': '√ª',
                '‚†´': '√´', '‚†ª': '√Ø', '‚†≥': '√º', '‚†™': '≈ì', '‚†∫': 'w',
                '‚†Ø': '√ß', '‚†ø': '√©', '‚†∑': '√†', '‚†Æ': '√®', '‚†æ': '√π',
                '‚†¢': '?', '‚†ñ': '!', '‚†¶': '(', '‚†î': '', '‚†¥': ')', '‚†Ñ': "'",
                '‚†Ç': ',', '‚†Ü': ';', '‚†í': ':', '‚†≤': ',', '‚†§': '-', '‚†Ä': ' ',
                // ËØ≠Èü≥ÊèêÁ§∫ - Ê≥ïËØ≠‰∏çÊîØÊåÅËØ≠Èü≥ÊèêÁ§∫
                voicePrompts: {}
            },
            ru: { // ‰øÑËØ≠
                name: "—Ä—É—Å—Å–∫–∏–π ‚†ó‚†•‚†é‚†é‚†Ö‚†ä‚†Ø",
                '‚†Å': '–∞', '‚†É': '–±', '‚†â': '—Ü', '‚†ô': '–¥', '‚†ë': '–µ',
                '‚†ã': '—Ñ', '‚†õ': '–≥', '‚†ì': '—Ö', '‚†ä': '–∏', '‚†ö': '–∂',
                '‚†Ö': '–∫', '‚†á': '–ª', '‚†ç': '–º', '‚†ù': '–Ω', '‚†ï': '–æ',
                '‚†è': '–ø', '‚†ü': '—á', '‚†ó': '—Ä', '‚†é': '—Å', '‚†û': '—Ç',
                '‚†•': '—É', '‚†ß': '', '‚†≠': '—â', '‚†Ω': '', '‚†µ': '–∑',
                '‚†Ø': '–π', '‚†ø': '', '‚†∑': '—ä', '‚†Æ': '—ã', '‚†æ': '—å',
                '‚†°': '—ë', '‚†£': '', '‚†©': '', '‚†π': '', '‚†±': '—à',
                '‚†´': '—è', '‚†ª': '', '‚†≥': '—é', '‚†™': '—ç', '‚†∫': '–≤',
                '‚†Ç': ',', '‚†Ü': ';', '‚†í': ':', '‚†≤': '.',
                '‚†¢': '?', '‚†ñ': '!', '‚†¶': '¬´', '‚†î': '',
                '‚†¥': '¬ª', '‚†§': '-', '‚†Ä': ' ',
                voicePrompts: {
                    '‚†Å': '–∞', '‚†É': '–±—ç', '‚†â': '—Ü—ç', '‚†ô': '–¥—ç', '‚†ë': '–µ',
                    '‚†ã': '—ç—Ñ', '‚†õ': '–≥—ç', '‚†ì': '—Ö–∞', '‚†ä': '–∏', '‚†ö': '–∂—ç',
                    '‚†Ö': '–∫–∞', '‚†á': '—ç–ª—å', '‚†ç': '—ç–º', '‚†ù': '—ç–Ω', '‚†ï': '–æ',
                    '‚†è': '–ø—ç', '‚†ü': '—á–µ', '‚†ó': '—ç—Ä', '‚†é': '—ç—Å', '‚†û': '—Ç—ç',
                    '‚†•': '—É', '‚†≠': '—â–∞', '‚†µ': '–∑—ç', '‚†Ø': '–∏ –∫—Ä–∞—Ç–∫–æ–µ',
                    '‚†∑': '—Ç–≤—ë—Ä–¥—ã–π –∑–Ω–∞–∫', '‚†Æ': '—ã', '‚†æ': '–º—è–≥–∫–∏–π –∑–Ω–∞–∫',
                    '‚†°': '—ë', '‚†±': '—à–∞', '‚†´': '—è', '‚†≥': '—é', '‚†™': '—ç', '‚†∫': '–≤—ç',
                    '‚†Ç': '–∑–∞–ø—è—Ç–∞—è', '‚†Ü': '—Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π',
                    '‚†í': '–¥–≤–æ–µ—Ç–æ—á–∏–µ', '‚†≤': '—Ç–æ—á–∫–∞', '‚†¢': '–≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫',
                    '‚†ñ': '–≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫', '‚†¶': '–æ—Ç–∫—Ä—ã–≤–∞—é—â–∞—è –∫–∞–≤—ã—á–∫–∞',
                    '‚†¥': '–∑–∞–∫—Ä—ã–≤–∞—é—â–∞—è –∫–∞–≤—ã—á–∫–∞', '‚†§': '–¥–µ—Ñ–∏—Å', '‚†Ä': '–ø—Ä–æ–±–µ–ª'
                }
            }
        };

        // ÈîÆÁõòÂ∏ÉÂ±ÄÂÆö‰πâ
        const keyboardLayout = [
            { id: 'key1', label: '1', braille: '‚†Å', left: '‚†Ö', up: '‚†•', right: '‚†°', down: '‚†Ç' },
            { id: 'key2', label: '2', braille: '‚†É', left: '‚†á', up: '‚†ß', right: '‚†£', down: '‚†Ü' },
            { id: 'key3', label: '3', braille: '‚†â', left: '‚†ç', up: '‚†≠', right: '‚†©', down: '‚†í' },
            { id: 'key4', label: '4', braille: '‚†ô', left: '‚†ù', up: '‚†Ω', right: '‚†π', down: '‚†≤' },
            { id: 'key5', label: '5', braille: '‚†ë', left: '‚†ï', up: '‚†µ', right: '‚†±', down: '‚†¢' },
            { id: 'key6', label: '6', braille: '‚†ã', left: '‚†è', up: '‚†Ø', right: '‚†´', down: '‚†ñ' },
            { id: 'key7', label: '7', braille: '‚†õ', left: '‚†ü', up: '‚†ø', right: '‚†ª', down: '‚†∂' },
            { id: 'key8', label: '8', braille: '‚†ì', left: '‚†ó', up: '‚†∑', right: '‚†≥', down: '‚†¶' },
            { id: 'key9', label: '9', braille: '‚†ä', left: '‚†é', up: '‚†Æ', right: '‚†™', down: '‚†î' },
            { id: 'key_add1', label: 'ÈôÑÂä†1', braille: '‚†à', left: '‚†å', up: '‚†¨', right: '‚†®', down: '‚†ê' },
            { id: 'key0', label: '0', braille: '‚†ö', left: '‚†û', up: '‚†æ', right: '‚†∫', down: '‚†¥' },
            { id: 'key_add2', label: 'ÈôÑÂä†2', braille: '‚†ò', left: '‚†ú', up: '‚†º', right: '‚†∏', down: '‚†∞' }
        ];
        const spaceKeyLayout = {id: 'key_space', label: 'Á©∫Êñπ', braille: '‚†Ä', left: '‚†Ñ', up: '‚†§', right: '‚††', down: '‚†Ä'};

        // Áä∂ÊÄÅÁÆ°ÁêÜ
        let currentBraille = '';
        let languages = [];
        let cursorPosition = 0;
        let isReordering = false;
        let voiceEnabled = true;
        let isResizing = false;
        let dragSrcEl = null;
        let currentWebLanguage = 'zh-CN';

        // DOMÂÖÉÁ¥†
        const keyboardEl = document.getElementById('keyboard');
        const brailleDisplayEl = document.getElementById('brailleDisplay');
        const displayAreaEl = document.getElementById('displayArea');
        const langSwitchEl = document.getElementById('langSwitch');
        const resizeHandleEl = document.getElementById('resizeHandle');
        const inputSectionEl = document.getElementById('inputSection');

        // ÂàùÂßãÂåñÈîÆÁõò
        function initKeyboard() {
            keyboardEl.innerHTML = '';
            
            keyboardLayout.forEach(key => {
                const keyEl = createKeyElement(key);
                keyboardEl.appendChild(keyEl);
            });
            
            const displayKey = document.createElement('button');
            displayKey.className = 'key key-function';
            displayKey.id = 'key_display';
            displayKey.innerHTML = `
                <div class="key-main-char">${i18n[currentWebLanguage].key_display}</div>
            `;
            
            displayKey.addEventListener('mousedown', () => {
                updateDisplayBoard(currentBraille);
            });
            displayKey.addEventListener('mouseup', resetDisplayBoard);
            displayKey.addEventListener('mouseleave', resetDisplayBoard);
            displayKey.addEventListener('touchstart', () => {
                updateDisplayBoard(currentBraille);
            });
            displayKey.addEventListener('touchend', resetDisplayBoard);
            
            keyboardEl.appendChild(displayKey);
            
            const spaceKey = createKeyElement(spaceKeyLayout);
            keyboardEl.appendChild(spaceKey);
            
            const controlKey = document.createElement('button');
            controlKey.className = 'key key-control';
            controlKey.id = 'key_control';
            controlKey.innerHTML = `
                <div class="key-main-char">${i18n[currentWebLanguage].key_enter}</div>
                <div class="key-directions">
                    <div class="direction direction-left">‚Üê</div>
                    <div class="direction direction-up">‚Üë</div>
                    <div class="direction direction-right">‚Üí</div>
                    <div class="direction direction-down">‚Üì</div>
                </div>
            `;
            controlKey.addEventListener('click', handleEnter);
            controlKey.addEventListener('touchstart', (e) => handleControlTouchStart(e, controlKey));
            controlKey.addEventListener('mousedown', (e) => handleControlMouseDown(e, controlKey));
            keyboardEl.appendChild(controlKey);
        }

        // ÂàõÂª∫ÊåâÈîÆÂÖÉÁ¥†
        function createKeyElement(key) {
            const keyEl = document.createElement('button');
            keyEl.className = 'key';
            keyEl.id = key.id;
            
            if (languages.length === 0) {
                keyEl.innerHTML = `
                    <div class="key-main-char">${key.braille === '‚†Ä' ? i18n[currentWebLanguage].key_space : key.braille}</div>
                    <div class="key-directions">
                        <div class="direction direction-left">${key.left}</div>
                        <div class="direction direction-up">${key.up}</div>
                        <div class="direction direction-right">${key.right}</div>
                        <div class="direction direction-down">${key.down}</div>
                    </div>
                `;
            } else {
                const mainLang = languages[0];
                const mainChar = getDisplayChar(key.braille, mainLang);
                const leftChar = getDisplayChar(key.left, mainLang);
                const upChar = getDisplayChar(key.up, mainLang);
                const rightChar = getDisplayChar(key.right, mainLang);
                const downChar = getDisplayChar(key.down, mainLang);
                
                keyEl.innerHTML = `
                    <div class="key-main-char">${mainChar === ' ' ? i18n[currentWebLanguage].key_space : mainChar}</div>
                    <div class="key-directions">
                        <div class="direction direction-left">${leftChar}</div>
                        <div class="direction direction-up">${upChar}</div>
                        <div class="direction direction-right">${rightChar}</div>
                        <div class="direction direction-down">${downChar}</div>
                    </div>
                `;
            }
            
            keyEl.addEventListener('click', () => handleKeyPress(key.braille, key.label, 'click'));
            keyEl.addEventListener('touchstart', (e) => handleTouchStart(e, keyEl, key));
            keyEl.addEventListener('mousedown', (e) => handleMouseDown(e, keyEl, key));
            
            return keyEl;
        }

        // Ëé∑ÂèñÊòæÁ§∫Â≠óÁ¨¶
        function getDisplayChar(brailleChar, lang) {
            if (!brailleChar) return '';
            
            if (lang === 'zh' && brailleMaps.zh.displayChars) {
                return brailleMaps.zh.displayChars[brailleChar] || '';
            }
            
            const char = brailleMaps[lang][brailleChar];
            return char === undefined || char === '' ? brailleChar : char;
        }

        // Ëß¶Êë∏ÂºÄÂßã‰∫ã‰ª∂Â§ÑÁêÜ
        function handleTouchStart(e, keyEl, key = null) {
            e.preventDefault();
            const touch = e.touches[0];
            const startX = touch.clientX;
            const startY = touch.clientY;
            
            function handleTouchMove(moveEvent) {
                const touch = moveEvent.touches[0];
                const deltaX = touch.clientX - startX;
                const deltaY = touch.clientY - startY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                if (distance > 10) {
                    let direction = '';
                    if (Math.abs(deltaX) > Math.abs(deltaY)) {
                        direction = deltaX > 0 ? 'right' : 'left';
                    } else {
                        direction = deltaY > 0 ? 'down' : 'up';
                    }
                    // ÊªëÂä®Â§ÑÁêÜÔºàÂê´Á©∫ÊñπÂÖ±13ÈîÆÔºâ
                    handleSwipe(key, direction, keyEl);
                    
                    document.removeEventListener('touchmove', handleTouchMove);
                    document.removeEventListener('touchend', handleTouchEnd);
                }
            }
            
            function handleTouchEnd() {
                document.removeEventListener('touchmove', handleTouchMove);
                document.removeEventListener('touchend', handleTouchEnd);
            }
            
            document.addEventListener('touchmove', handleTouchMove);
            document.addEventListener('touchend', handleTouchEnd);
        }

        // Èº†Ê†áÊåâ‰∏ã‰∫ã‰ª∂Â§ÑÁêÜ
        function handleMouseDown(e, keyEl, key = null) {
            const startX = e.clientX;
            const startY = e.clientY;
            
            function handleMouseMove(moveEvent) {
                const deltaX = moveEvent.clientX - startX;
                const deltaY = moveEvent.clientY - startY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                if (distance > 10) {
                    let direction = '';
                    if (Math.abs(deltaX) > Math.abs(deltaY)) {
                        direction = deltaX > 0 ? 'right' : 'left';
                    } else {
                        direction = deltaY > 0 ? 'down' : 'up';
                    }
                    
                    if (key) {
                        handleSwipe(key, direction, keyEl);
                    } else {
                        handleSwipe(spaceKeyLayout, direction, keyEl);
                    }
                    
                    document.removeEventListener('mousemove', handleMouseMove);
                    document.removeEventListener('mouseup', handleMouseUp);
                }
            }
            
            function handleMouseUp() {
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', handleMouseUp);
            }
            
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
        }

        // ÊéßÂà∂ÈîÆËß¶Êë∏ÂºÄÂßã‰∫ã‰ª∂Â§ÑÁêÜ
        function handleControlTouchStart(e, controlKey) {
            e.preventDefault();
            const touch = e.touches[0];
            const startX = touch.clientX;
            const startY = touch.clientY;
            
            function handleTouchMove(moveEvent) {
                const touch = moveEvent.touches[0];
                const deltaX = touch.clientX - startX;
                const deltaY = touch.clientY - startY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                if (distance > 10) {
                    let direction = '';
                    if (Math.abs(deltaX) > Math.abs(deltaY)) {
                        direction = deltaX > 0 ? 'right' : 'left';
                    } else {
                        direction = deltaY > 0 ? 'down' : 'up';
                    }
                    
                    handleControlSwipe(direction);
                    
                    document.removeEventListener('touchmove', handleTouchMove);
                    document.removeEventListener('touchend', handleTouchEnd);
                }
            }
            
            function handleTouchEnd() {
                document.removeEventListener('touchmove', handleTouchMove);
                document.removeEventListener('touchend', handleTouchEnd);
            }
            
            document.addEventListener('touchmove', handleTouchMove);
            document.addEventListener('touchend', handleTouchEnd);
        }

        // ÊéßÂà∂ÈîÆÈº†Ê†áÊåâ‰∏ã‰∫ã‰ª∂Â§ÑÁêÜ
        function handleControlMouseDown(e, controlKey) {
            const startX = e.clientX;
            const startY = e.clientY;
            
            function handleMouseMove(moveEvent) {
                const deltaX = moveEvent.clientX - startX;
                const deltaY = moveEvent.clientY - startY;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                if (distance > 10) {
                    let direction = '';
                    if (Math.abs(deltaX) > Math.abs(deltaY)) {
                        direction = deltaX > 0 ? 'right' : 'left';
                    } else {
                        direction = deltaY > 0 ? 'down' : 'up';
                    }
                    
                    handleControlSwipe(direction);
                    
                    document.removeEventListener('mousemove', handleMouseMove);
                    document.removeEventListener('mouseup', handleMouseUp);
                }
            }
            
            function handleMouseUp() {
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', handleMouseUp);
            }
            
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
        }

        // Â§ÑÁêÜÊªëÂä®ËæìÂÖ•
        function handleSwipe(key, direction, keyEl) {
            let brailleChar = '';
            switch (direction) {
                case 'left': brailleChar = key.left; break;
                case 'up': brailleChar = key.up; break;
                case 'right': brailleChar = key.right; break;
                case 'down': brailleChar = key.down; break;
            }
            
            if (brailleChar) {
                keyEl.classList.add('active');
                handleKeyPress(brailleChar, key.label, direction);
                setTimeout(() => {
                    keyEl.classList.remove('active');
                }, 300);
            }
        }

        // Â§ÑÁêÜÊéßÂà∂ÈîÆÊªëÂä®
        function handleControlSwipe(direction) {
            switch (direction) {
                case 'left': moveCursor(-1); break;
                case 'up': moveCursorToLine(-1); break;
                case 'right': moveCursor(1); break;
                case 'down': moveCursorToLine(1); break;
            }
        }

        // Â§ÑÁêÜÊåâÈîÆËæìÂÖ•
        function handleKeyPress(brailleChar, keyLabel, action) {
            updateDisplayBoard(brailleChar);
            
            // Êí≠ÊîæËØ≠Èü≥ÊèêÁ§∫ - ‰∏ñÁïåËØ≠ÂíåÊ≥ïËØ≠‰∏çÊîØÊåÅËØ≠Èü≥ÊèêÁ§∫
            if (voiceEnabled && languages.length > 0) {
                const mainLang = languages[0];
                if (mainLang !== 'eo' && mainLang !== 'fr' && 
                    brailleMaps[mainLang].voicePrompts && 
                    brailleMaps[mainLang].voicePrompts[brailleChar]) {
                    speakText(brailleMaps[mainLang].voicePrompts[brailleChar], mainLang);
                }
            }
            
            insertBrailleAtCursor(brailleChar);
            updateAllDisplays();
        }

        // Êõ¥Êñ∞ÊòæÁ§∫Êùø
        function updateDisplayBoard(brailleChar) {
            const displayKey = document.getElementById('key_display');
            if (displayKey) {
                if (languages.length === 0) {
                    displayKey.innerHTML = `
                        <div class="key-main-char">${brailleChar}</div>
                    `;
                } else {
                    const mainLang = languages[0];
                    const char = getDisplayChar(brailleChar, mainLang);
                    
                    displayKey.innerHTML = `
                        <div class="key-main-char">${brailleChar}</div>
                        <div style="font-size: 0.7em; margin-top: 2px;">${char}</div>
                    `;
                }
            }
        }

        // ÈáçÁΩÆÊòæÁ§∫Êùø
        function resetDisplayBoard() {
            const displayKey = document.getElementById('key_display');
            if (displayKey) {
                displayKey.innerHTML = `<div class="key-main-char">${i18n[currentWebLanguage].key_display}</div>`;
            }
        }

        // Âú®ÂÖâÊ†á‰ΩçÁΩÆÊèíÂÖ•Áõ≤Êñá
        function insertBrailleAtCursor(brailleChar) {
            const text = brailleDisplayEl.textContent;
            const beforeCursor = text.slice(0, cursorPosition);
            const afterCursor = text.slice(cursorPosition);
            
            brailleDisplayEl.textContent = beforeCursor + brailleChar + afterCursor;
            cursorPosition += brailleChar.length;
            
            updateCursorPosition();
        }

        // Â§ÑÁêÜÂõûËΩ¶
        function handleEnter() {
            insertBrailleAtCursor('\n');
            updateAllDisplays();
        }

        // ÁßªÂä®ÂÖâÊ†á
        function moveCursor(direction) {
            const text = brailleDisplayEl.textContent;
            const newPosition = cursorPosition + direction;
            
            if (newPosition >= 0 && newPosition <= text.length) {
                cursorPosition = newPosition;
                updateCursorPosition();
            }
        }

        // ÁßªÂä®Âà∞‰∏ä‰∏ÄË°å/‰∏ã‰∏ÄË°å
        function moveCursorToLine(direction) {
            const text = brailleDisplayEl.textContent;
            let newPosition = cursorPosition;
            
            if (direction < 0) {
                const beforeCursor = text.slice(0, cursorPosition);
                const lastNewline = beforeCursor.lastIndexOf('\n');
                if (lastNewline !== -1) {
                    const prevNewline = beforeCursor.lastIndexOf('\n', lastNewline - 1);
                    newPosition = prevNewline !== -1 ? prevNewline + 1 : 0;
                }
            } else {
                const afterCursor = text.slice(cursorPosition);
                const nextNewline = afterCursor.indexOf('\n');
                if (nextNewline !== -1) {
                    newPosition = cursorPosition + nextNewline + 1;
                    const nextNextNewline = afterCursor.indexOf('\n', nextNewline + 1);
                    if (nextNextNewline !== -1) {
                        newPosition = Math.min(newPosition, cursorPosition + nextNextNewline);
                    } else {
                        newPosition = text.length;
                    }
                }
            }
            
            cursorPosition = newPosition;
            updateCursorPosition();
        }

        // Êõ¥Êñ∞ÂÖâÊ†á‰ΩçÁΩÆ
        function updateCursorPosition() {
            const existingCursor = brailleDisplayEl.querySelector('.cursor');
            if (existingCursor) {
                existingCursor.remove();
            }
            
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            
            const text = brailleDisplayEl.textContent;
            const beforeCursor = text.slice(0, cursorPosition);
            const afterCursor = text.slice(cursorPosition);
            
            brailleDisplayEl.textContent = beforeCursor;
            brailleDisplayEl.appendChild(cursor);
            brailleDisplayEl.appendChild(document.createTextNode(afterCursor));
        }

        // Â§ÑÁêÜÂà†Èô§
        function handleBackspace() {
            if (cursorPosition > 0) {
                const text = brailleDisplayEl.textContent;
                const beforeCursor = text.slice(0, cursorPosition - 1);
                const afterCursor = text.slice(cursorPosition);
                
                brailleDisplayEl.textContent = beforeCursor + afterCursor;
                cursorPosition--;
                
                updateCursorPosition();
                updateAllDisplays();
            }
        }

        // Ê∏ÖÁ©∫Áõ≤Êñá
        function clearBraille() {
            brailleDisplayEl.textContent = '';
            cursorPosition = 0;
            updateCursorPosition();
            updateAllDisplays();
        }

        // Êõ¥Êñ∞ÊâÄÊúâÊòæÁ§∫
        function updateAllDisplays() {
            const brailleText = brailleDisplayEl.textContent.replace(/\u200B/g, '');
            
            languages.forEach(lang => {
                const langDisplayEl = document.getElementById(`textDisplay_${lang}`);
                if (langDisplayEl) {
                    let text = '';
                    
                    if (lang === 'zh') {
                        let textArray = [];
                        for (let i = 0; i < brailleText.length; i++) {
                            const brailleChar = brailleText[i];
                            let char = brailleMaps[lang][brailleChar];
                            
                            if (char === undefined || char === '') {
                                textArray.push(`<span class="braille-char undefined">${brailleChar}</span>`);
                            } else {
                                char = applyChineseRules(brailleText, i, char, textArray);
                                textArray.push(char);
                            }
                        }
                        text = textArray.join('');
                    } else {
                        for (let i = 0; i < brailleText.length; i++) {
                            const brailleChar = brailleText[i];
                            let char = brailleMaps[lang][brailleChar];
                            
                            if (char === undefined || char === '') {
                                text += `<span class="braille-char undefined">${brailleChar}</span>`;
                            } else {
                                text += char;
                            }
                        }
                    }
                    
                    langDisplayEl.innerHTML = text;
                }
            });
        }

        // Â∫îÁî®‰∏≠ÊñáÂèòÈü≥ËßÑÂàô
        function applyChineseRules(text, index, currentChar, textArray) {
            // Â§ÑÁêÜÂ£∞ÊØçÂèòÈü≥Ôºö„Ñç„Ñé„Ñè(gkh)ÂêéÈù¢ÈÅáÂà∞‰ª•„Ñß„Ñ©ÂºÄÂ§¥ÁöÑÈüµÊØçÊó∂Âèò‰∏∫„Ñê„Ñë„Ñí(jqx)
            if (index > 0 && ['‚†õ', '‚†Ö', '‚†ì'].includes(text[index-1])) {
                const prevChar = text[index-1];
                const isYiYuVowel = currentChar && (currentChar[0] === '„Ñß' || currentChar[0] === '„Ñ©');
                
                if (isYiYuVowel) {
                    if (prevChar === '‚†õ') textArray[index-1] = '„Ñê';
                    if (prevChar === '‚†Ö') textArray[index-1] = '„Ñë';
                    if (prevChar === '‚†ì') textArray[index-1] = '„Ñí';
                }
            }
            
            // Â§ÑÁêÜÈüµÊØçÂèòÈü≥Ôºö„Ñú(o)ÂâçÈù¢ÈÅáÂà∞Â£∞ÊØç„ÑÖ„ÑÜ„Ñá„Ñà(bpmf)Êó∂Âèò‰∏∫„Ñõ(e)
            if (currentChar === '„Ñú' && index > 0 && ['‚†É', '‚†è', '‚†ç', '‚†ã'].includes(text[index-1])) {
                return '„Ñõ';
            }
            
            return currentChar;
        }

        // ÂàùÂßãÂåñËØ≠Ë®ÄÊòæÁ§∫Ê°Ü
        function initLanguageDisplays() {
            const existingLangDisplays = displayAreaEl.querySelectorAll('.language-box');
            existingLangDisplays.forEach(box => {
                if (!box.id.includes('braille')) box.remove();
            });
            
            languages.forEach((lang, index) => {
                if (index >= 10) return;
                
                const langBox = document.createElement('div');
                langBox.className = 'language-box display-box';
                langBox.id = `langBox_${lang}`;
                langBox.setAttribute('draggable', 'true');
                langBox.setAttribute('data-lang', lang);
                
                // Âú® initLanguageDisplays ÂáΩÊï∞‰∏≠ÊâæÂà∞ËØ≠Èü≥ÊåâÈíÆÂàõÂª∫ÈÉ®ÂàÜÔºå‰øÆÊîπ‰∏∫Ôºö
                let voiceToggleHtml = '';
                if (index === 0) {
                    // Ê£ÄÊü•ÂΩìÂâçËØ≠ÁßçÊòØÂê¶ÊîØÊåÅËØ≠Èü≥ÊèêÁ§∫Ôºà‰∏ñÁïåËØ≠ÂíåÊ≥ïËØ≠‰∏çÊîØÊåÅÔºâ
                    if (lang !== 'eo' && lang !== 'fr') {
                        const voiceText = voiceEnabled ? 
                            i18n[currentWebLanguage]['voice_prompt'].replace(': ÂÖ≥Èó≠', ': ÂºÄÂêØ').replace(': Off', ': On').replace(': –í—ã–∫', ': –í–∫–ª').replace(': D√©sactiv√©', ': Activ√©').replace(': Apagado', ': Activado').replace(': ŸÖÿ∫ŸÑŸÇ', ': ŸÖŸÅÿπŸÑ') :
                            i18n[currentWebLanguage]['voice_prompt'].replace(': ÂºÄÂêØ', ': ÂÖ≥Èó≠').replace(': On', ': Off').replace(': –í–∫–ª', ': –í—ã–∫').replace(': Activ√©', ': D√©sactiv√©').replace(': Activado', ': Apagado').replace(': ŸÖŸÅÿπŸÑ', ': ŸÖÿ∫ŸÑŸÇ');
                        voiceToggleHtml = `
                            <button class="lang-control-btn voice-toggle ${voiceEnabled ? 'active' : ''}" 
                                    onclick="toggleVoice()">${voiceText}</button>
                        `;
                    }
                }
                
                langBox.innerHTML = `
                    <div class="display-title">
                        <span>${brailleMaps[lang].name}</span>
                        <div class="language-controls">
                            ${voiceToggleHtml}
                            <button class="lang-control-btn" onclick="copyLanguageText('${lang}')" data-i18n="copy">Â§çÂà∂</button>
                            <button class="lang-control-btn" onclick="removeLanguage('${lang}')">√ó</button>
                        </div>
                    </div>
                    <div class="display-content" id="textDisplay_${lang}"></div>
                `;
                
                langBox.addEventListener('dragstart', handleDragStart);
                langBox.addEventListener('dragover', handleDragOver);
                langBox.addEventListener('dragenter', handleDragEnter);
                langBox.addEventListener('dragleave', handleDragLeave);
                langBox.addEventListener('drop', handleDrop);
                langBox.addEventListener('dragend', handleDragEnd);
                
                displayAreaEl.appendChild(langBox);
            });
            
            updateAllDisplays();
            initKeyboard();
        }

        // ÊãñÊãΩÁõ∏ÂÖ≥ÂáΩÊï∞
        function handleDragStart(e) {
            dragSrcEl = this;
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
            this.classList.add('dragging');
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        // Âú® handleDrop ÂáΩÊï∞‰∏≠ÔºåÂú®ÈáçÊñ∞ÂàùÂßãÂåñËØ≠Ë®ÄÊòæÁ§∫ÂêéÊ£ÄÊü•Ôºö
        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            
            if (dragSrcEl !== this) {
                const dragLang = dragSrcEl.getAttribute('data-lang');
                const dropLang = this.getAttribute('data-lang');
                
                const dragIndex = languages.indexOf(dragLang);
                const dropIndex = languages.indexOf(dropLang);
                
                [languages[dragIndex], languages[dropIndex]] = [languages[dropIndex], languages[dragIndex]];
                
                initLanguageDisplays();
                
                // Â¶ÇÊûúËØ≠Áßç1Âèò‰∏∫‰∏çÊîØÊåÅËØ≠Èü≥ÁöÑËØ≠Ë®ÄÔºåÂÖ≥Èó≠ËØ≠Èü≥ÊèêÁ§∫
                if (languages.length > 0 && (languages[0] === 'eo' || languages[0] === 'fr')) {
                    voiceEnabled = false;
                }
            }
            
            return false;
        }

        function handleDragEnd(e) {
            document.querySelectorAll('.language-box').forEach(box => {
                box.classList.remove('dragging');
                box.classList.remove('drag-over');
            });
        }

        // Ê∑ªÂä†ËØ≠Áßç
        function addLanguage() {
            if (languages.length >= 10) {
                alert(i18n[currentWebLanguage].max_ten_lang);
                return;
            }
            
            const dialog = document.createElement('div');
            dialog.className = 'language-dialog';
            
            const content = document.createElement('div');
            content.className = 'language-dialog-content';
            
            content.innerHTML = `
                <h3 data-i18n="select_language">ÈÄâÊã©ËØ≠Áßç</h3>
                <div class="language-options">
                    ${Object.entries(brailleMaps).map(([code, lang]) => `
                        <div class="language-option" data-lang="${code}">
                            <strong>${code}</strong> - ${lang.name}
                        </div>
                    `).join('')}
                </div>
                <button class="action-btn" style="margin-top: 15px;">${i18n[currentWebLanguage].cancel}</button>
            `;
            
            dialog.appendChild(content);
            document.body.appendChild(dialog);
            
            // Âú®ÈÄâÊã©ËØ≠ÁßçÂêéÁöÑÂõûË∞É‰∏≠Ê∑ªÂä†Ôºö
            content.querySelector('.language-options').addEventListener('click', (e) => {
                const option = e.target.closest('.language-option');
                if (option) {
                    const langCode = option.getAttribute('data-lang');
                    languages.push(langCode);
                    initLanguageDisplays();
                    
                    // Â¶ÇÊûúÊ∑ªÂä†ÁöÑËØ≠ÁßçÊòØÁ¨¨‰∏Ä‰∏™‰∏î‰∏çÊîØÊåÅËØ≠Èü≥ÔºåÂÖ≥Èó≠ËØ≠Èü≥ÊèêÁ§∫
                    if (languages.length === 1 && (langCode === 'eo' || langCode === 'fr')) {
                        voiceEnabled = false;
                    }
                    
                    document.body.removeChild(dialog);
                }
            });
            
            content.querySelector('.action-btn').addEventListener('click', () => {
                document.body.removeChild(dialog);
            });
        }

        // ÁßªÈô§ËØ≠Áßç
        function removeLanguage(lang) {
            if (languages.length > 0) {
                const index = languages.indexOf(lang);
                if (index !== -1) {
                    languages.splice(index, 1);
                    initLanguageDisplays();
                }
            }
        }

        // ÂàáÊç¢ËØ≠Èü≥ÊèêÁ§∫
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const voiceToggle = document.querySelector('.voice-toggle');
            if (voiceToggle) {
                const voiceText = voiceEnabled ? 
                    i18n[currentWebLanguage]['voice_prompt'].replace(': ÂÖ≥Èó≠', ': ÂºÄÂêØ').replace(': Off', ': On').replace(': –í—ã–∫', ': –í–∫–ª').replace(': D√©sactiv√©', ': Activ√©').replace(': Apagado', ': Activado').replace(': ŸÖÿ∫ŸÑŸÇ', ': ŸÖŸÅÿπŸÑ') :
                    i18n[currentWebLanguage]['voice_prompt'].replace(': ÂºÄÂêØ', ': ÂÖ≥Èó≠').replace(': On', ': Off').replace(': –í–∫–ª', ': –í—ã–∫').replace(': Activ√©', ': D√©sactiv√©').replace(': Activado', ': Apagado').replace(': ŸÖŸÅÿπŸÑ', ': ŸÖÿ∫ŸÑŸÇ');
                voiceToggle.textContent = voiceText;
                voiceToggle.classList.toggle('active', voiceEnabled);
            }
        }

        // ËØ≠Èü≥ÂêàÊàê
        function speakText(text, lang) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang === 'zh' ? 'zh-CN' : (lang === 'ru' ? 'ru-RU' : 'en-US');
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // Â§çÂà∂Áõ≤Êñá
        function copyBraille() {
            const brailleText = brailleDisplayEl.textContent.replace(/\u200B/g, '');
            navigator.clipboard.writeText(brailleText).then(() => {
                alert(i18n[currentWebLanguage].copied_done);
            });
        }

        // Â§çÂà∂ËØ≠Ë®ÄÊñáÊú¨
        function copyLanguageText(lang) {
            const brailleText = brailleDisplayEl.textContent.replace(/\u200B/g, '');
            let text = '';
            
            if (lang === 'zh') {
                let textArray = [];
                for (let i = 0; i < brailleText.length; i++) {
                    const brailleChar = brailleText[i];
                    let char = brailleMaps[lang][brailleChar];
                    
                    if (char === undefined || char === '') {
                        textArray.push(brailleChar);
                    } else {
                        char = applyChineseRules(brailleText, i, char, textArray);
                        textArray.push(char);
                    }
                }
                text = textArray.join('');
            } else {
                for (let i = 0; i < brailleText.length; i++) {
                    const brailleChar = brailleText[i];
                    let char = brailleMaps[lang][brailleChar];
                    text += char || brailleChar;
                }
            }
            
            navigator.clipboard.writeText(text).then(() => {
                alert(i18n[currentWebLanguage].copied_done);
            });
        }

        // ÂàùÂßãÂåñ‰∫ã‰ª∂ÁõëÂê¨
        function initEventListeners() {
            document.getElementById('clearBtn').addEventListener('click', clearBraille);
            document.getElementById('addLangBtn').addEventListener('click', addLanguage);
            
            langSwitchEl.addEventListener('change', (e) => {
                switchWebLanguage(e.target.value);
            });
            
            brailleDisplayEl.addEventListener('click', (e) => {
                const text = brailleDisplayEl.textContent;
                cursorPosition = text.length;
                updateCursorPosition();
            });
            
            resizeHandleEl.addEventListener('mousedown', startResize);
        }

        // ÂºÄÂßãË∞ÉÊï¥ÂÆΩÂ∫¶
        function startResize(e) {
            isResizing = true;
            document.addEventListener('mousemove', handleResize);
            document.addEventListener('mouseup', stopResize);
        }

        // Â§ÑÁêÜÂÆΩÂ∫¶Ë∞ÉÊï¥
        function handleResize(e) {
            if (!isResizing) return;
            
            const containerRect = document.querySelector('.container').getBoundingClientRect();
            const newWidth = e.clientX - containerRect.left;
            
            if (newWidth > 250 && newWidth < containerRect.width * 0.8) {
                inputSectionEl.style.width = `${newWidth}px`;
            }
        }

        // ÂÅúÊ≠¢Ë∞ÉÊï¥ÂÆΩÂ∫¶
        function stopResize() {
            isResizing = false;
            document.removeEventListener('mousemove', handleResize);
            document.removeEventListener('mouseup', stopResize);
        }

        // ÂàáÊç¢ÁΩëÈ°µËØ≠Ë®Ä
        function switchWebLanguage(lang) {
            currentWebLanguage = lang;
            document.documentElement.lang = lang;
            
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (i18n[lang] && i18n[lang][key]) {
                    element.textContent = i18n[lang][key];
                }
            });
            
            // Êõ¥Êñ∞ËØ≠Èü≥ÊèêÁ§∫ÊåâÈíÆÊñáÊú¨ÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
            const voiceToggle = document.querySelector('.voice-toggle');
            if (voiceToggle && languages.length > 0) {
                const mainLang = languages[0];
                // Âè™ÊúâÂΩìËØ≠Áßç1ÊîØÊåÅËØ≠Èü≥ÊèêÁ§∫Êó∂ÊâçÊõ¥Êñ∞ÊåâÈíÆÊñáÊú¨
                if (mainLang !== 'eo' && mainLang !== 'fr') {
                    const voiceText = voiceEnabled ? 
                        i18n[currentWebLanguage]['voice_prompt'].replace(': ÂÖ≥Èó≠', ': ÂºÄÂêØ').replace(': Off', ': On').replace(': –í—ã–∫', ': –í–∫–ª').replace(': D√©sactiv√©', ': Activ√©').replace(': Apagado', ': Activado').replace(': ŸÖÿ∫ŸÑŸÇ', ': ŸÖŸÅÿπŸÑ') :
                        i18n[currentWebLanguage]['voice_prompt'].replace(': ÂºÄÂêØ', ': ÂÖ≥Èó≠').replace(': On', ': Off').replace(': –í–∫–ª', ': –í—ã–∫').replace(': Activ√©', ': D√©sactiv√©').replace(': Activado', ': Apagado').replace(': ŸÖŸÅÿπŸÑ', ': ŸÖÿ∫ŸÑŸÇ');
                    voiceToggle.textContent = voiceText;
                }
            }
            
            initKeyboard();
        }

        // ÂàùÂßãÂåñÂ∫îÁî®
        function initApp() {
            initKeyboard();
            initLanguageDisplays();
            initEventListeners();
            updateCursorPosition();
            
            switchWebLanguage('zh-CN');
        }

        // ÂêØÂä®Â∫îÁî®
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
